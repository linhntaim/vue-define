"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _define=_interopRequireDefault(require("./define"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var DefineManager=/*#__PURE__*/function(){function DefineManager(){_classCallCheck(this,DefineManager)}_createClass(DefineManager,[{key:"append",value:function append(){var define;for(var _len=arguments.length,defines=new Array(_len),_key=0;_key<_len;_key++){defines[_key]=arguments[_key]}while(define=defines.shift()){for(var key in define){this.set(key,define[key])}}}},{key:"import",value:function _import(){var _this=this;for(var _len2=arguments.length,promised=new Array(_len2),_key2=0;_key2<_len2;_key2++){promised[_key2]=arguments[_key2]}return new Promise(function(resolve,reject){var matching=promised.length;var matched=0,p;while(p=promised.shift()){p.then(function(defines){if(defines.hasOwnProperty("default")){_this.append(defines["default"])}else{_this.append(defines)}++matched;if(matched===matching){resolve()}})["catch"](function(e){reject(e)})}})}},{key:"get",value:function get(){var name=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;return name?this.tryGet(_define["default"],name):_define["default"]}},{key:"tryGet",value:function tryGet(define,name){var _name$split=name.split(".",2),_name$split2=_slicedToArray(_name$split,2),name1=_name$split2[0],name2=_name$split2[1];if(define.hasOwnProperty(name1)){return name2?this.tryGet(define[name1],name2):define[name1]}return null}},{key:"set",value:function set(name,value){var force=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;this.trySet(_define["default"],name,value,force)}},{key:"trySet",value:function trySet(define,name,value,force){var names=name.split("."),name1=names.shift(),name2=names.join(".");var check=function check(){if(!define.hasOwnProperty(name1)){define[name1]={}}else{if(_typeof(define[name1])!=="object"||define[name1].constructor!==Object){if(force)define[name1]={};else return false}}return true};if(name2){if(check()){this.trySet(define[name1],name2,value,force)}return}if(value&&_typeof(value)==="object"&&value.constructor===Object){if(check()){for(var key in value){this.trySet(define[name1],key,value[key],force)}}}else{define[name1]=value}}}]);return DefineManager}();var _default=new DefineManager;exports["default"]=_default;
//# sourceMappingURL=define_manager.js.map